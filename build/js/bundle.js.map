{"version":3,"sources":["webpack:///webpack/bootstrap cae51aaa0e68e272597f","webpack:///./src/config.js","webpack:///./src/utilities.js","webpack:///./src/styleSheets.js","webpack:///./src/model.js","webpack:///./src/loaders.js","webpack:///./src/index.js","webpack:///./src/app.js","webpack:///./src/background.js","webpack:///./src/camera.js","webpack:///./src/container.js","webpack:///./src/css3dObjects.js","webpack:///./src/css3dObject.js","webpack:///./src/cssRoot.js","webpack:///./src/domWrapper.js","webpack:///./src/environment.js","webpack:///./src/events.js","webpack:///./src/lights.js","webpack:///./src/grid.js","webpack:///./src/models.js","webpack:///./src/rendererCSS.js","webpack:///./src/rendererGL.js","webpack:///./src/state.js","webpack:///./src/webview.js"],"names":["WEBVIEW_DISTANCE","WEBVIEW_WIDTH","WEBVIEW_HEIGHT","CAMERA_HEIGHT","CAMERA_FOV","CAMERA_NEAR","CAMERA_FAR","BACKGROUND_RADIUS","metersToPx","pxToMeters","getTransform","parseMatrix","parseCssVar","parseCssUrl","meters","px","element","matrix","getComputedStyle","transform","rotateY","Math","asin","m13","rotateX","rotateZ","cos","atan2","m23","m33","m12","m11","m31","m22","rotate","x","y","z","translate","m41","m42","m43","scale","matrixString","c","split","slice","length","m21","m32","m14","m24","m34","m44","varName","elementStyles","window","getPropertyValue","trim","css_url","console","log","uri","match","last","StyleSheets","sheets","document","styleSheets","i","title","vr","mode","disabled","Model","sceneFar","sceneNear","group","THREE","Group","gltf","src","getAttribute","coordinateSystem","add","load","scene","position","set","visible","loadOBJ","loaderGLTF","GLTF2Loader","loaderOBJ","OBJLoader2","customProp","model_url","querySelector","obj","init","onload","App","Background","texture","geometry","SphereGeometry","applyMatrix","Matrix4","makeScale","object","Mesh","MeshBasicMaterial","shading","FlatShading","map","TextureLoader","rotation","TWEEN","Tween","material","to","opacity","onComplete","bind","start","delay","Camera","renderer","webview","width","domElement","height","camera","PerspectiveCamera","lookAt","lookAtTarget","Vector3","updateSize","addEventListener","aspect","updateProjectionMatrix","tweenA","easing","Easing","Quadratic","Out","tweenB","InOut","tweenC","chain","tweenD","fov","Container","container","createElement","id","style","top","left","body","appendChild","Css3dObjects","cssRoot","domWrapper","setVRSheet","allElements","stereoElements","getElementsByTagName","push","transformStyle","css3dObject","duration","forEach","e","hide","show","Css3dObject","coordinateSpace","startWidth","parseInt","startHeight","startX","offsetLeft","startY","offsetTop","startZ","targetScaleX","targetScaleY","clone","cloneNode","parentElement","insertBefore","bottom","right","CSS3DObject","targetTransformX","targetTransformY","targetTransformZ","visibility","animate","tranX","tranY","tranZ","scaleX","scaleY","setTimeout","CssRoot","Object3D","DomWrapper","String","overflow","borderRadius","boxShadow","transition","children","el","Environment","Events","state","handled","metaKey","keyCode","demoMode","enabled","setDisplayMode","lookAroundEdgesOfWebview","lookSideToSide","panSideToSide","orthographic","preventDefault","Lights","light","HemisphereLight","Grid","PlaneGeometry","transparent","Models","modelElements","modelObjects","model","RendererCSS","CSS3DRenderer","setSize","offsetWidth","offsetHeight","render","RendererGL","WebGLRenderer","antialias","alpha","State","siteBackground","grid","environment","models","currentDisplayMode","steps","currentStep","targetMode","enableMobileMode","enableVrFullscreenMode","enableVrFullscreenDemoMode","enableVrWindowedMode","showShadows","hideShadows","WebView"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cae51aaa0e68e272597f","export default {\n\tWEBVIEW_DISTANCE: 2,\n\tWEBVIEW_WIDTH: 0.96,\n\tWEBVIEW_HEIGHT: 0.64,\n\tCAMERA_HEIGHT: 1.6,\n  CAMERA_FOV: 80,\n\tCAMERA_NEAR: 0.1,\n\tCAMERA_FAR: 60000,\n\tBACKGROUND_RADIUS: 499\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","// export function toggleWebGLVisibility(target, mode, duration = 250, delay = 0) {\n\n//   if (mode == 'show') {\n\n//     // turn visibility true, then tween opacity to 1\n//     target.visible = true;\n//     new TWEEN.Tween(target.material)\n//       .to({opacity: 1}, delay)\n//       .delay(delay)\n//       .start();\n\n//   } else if (mode == 'hide') {\n\n//     // tween to 0 then set visibility to false\n//     new TWEEN.Tween(target.material)\n//       .to({opacity: 0}, delay)\n//       .delay(delay)\n//       .onComplete(function(){\n//         target.visible = false;\n//       })\n//       .start();\n//   }\n// }\n\n\n// export function toggleCSSVisibility(target, mode, delay = 0) {\n\n//   if (mode == 'show') {\n\n//     if (delay > 0) {\n//       window.setTimeout(() => {\n//         target.style.visibility = 'visible';\n//       }, delay);\n//     } else {\n//       target.style.visibility = 'visible';\n//     }\n\n//   } else if (mode == 'hide') {\n\n//     if (delay > 0) {\n//       window.setTimeout(() => {\n//         target.style.visibility = 'hidden';\n//       }, delay);\n//     } else {\n//       target.style.visibility = 'hidden';\n//     }\n//   }\n// }\n\nexport function metersToPx(meters) {\n  return meters * 1000;\n}\n\nexport function pxToMeters(px) {\n  return px / 1000;\n}\n\n\n// getTransform and parseMatrix functions taken from Keith Clark:\n// http://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/\nexport function getTransform (element) {\n    var matrix = parseMatrix(getComputedStyle(element, null).transform),\n        rotateY = Math.asin(-matrix.m13),\n        rotateX, \n        rotateZ;\n\n    if (Math.cos(rotateY) !== 0) {\n        rotateX = Math.atan2(matrix.m23, matrix.m33);\n        rotateZ = Math.atan2(matrix.m12, matrix.m11);\n    } else {\n        rotateX = Math.atan2(-matrix.m31, matrix.m22);\n        rotateZ = 0;\n    }\n    return {\n        rotate: { x: rotateX, y: rotateY, z: rotateZ },\n        translate: { x: matrix.m41, y: matrix.m42, z: matrix.m43 },\n        scale: { x: matrix.m11, y: matrix.m22, z: matrix.m33  }\n    };\n}\n\n\nexport function parseMatrix (matrixString) {\n  var c = matrixString.split(/\\s*[(),]\\s*/).slice(1,-1),\n    matrix;\n  if (c.length === 6) {\n    // 'matrix()' (3x2)\n    matrix = {\n        m11: +c[0], m21: +c[2], m31: 0, m41: +c[4],\n        m12: +c[1], m22: +c[3], m32: 0, m42: +c[5],\n        m13: 0,     m23: 0,     m33: 1, m43: 0,\n        m14: 0,     m24: 0,     m34: 0, m44: 1\n    };\n  } else if (c.length === 16) {\n    // matrix3d() (4x4)\n    matrix = {\n        m11: +c[0], m21: +c[4], m31: +c[8], m41: +c[12],\n        m12: +c[1], m22: +c[5], m32: +c[9], m42: +c[13],\n        m13: +c[2], m23: +c[6], m33: +c[10], m43: +c[14],\n        m14: +c[3], m24: +c[7], m34: +c[11], m44: +c[15]\n    };\n  } else {\n    // handle 'none' or invalid values.\n    matrix = {\n        m11: 1, m21: 0, m31: 0, m41: 0,\n        m12: 0, m22: 1, m32: 0, m42: 0,\n        m13: 0, m23: 0, m33: 1, m43: 0,\n        m14: 0, m24: 0, m34: 0, m44: 1\n    };\n  }\n  return matrix;\n}\n\n\n// TODO: Combined into a single generic function that can tell whether property value is a url().\n// For now I need to know ahead of time the CSS value so I know which function to call.\nexport function parseCssVar(element, varName){\n  const elementStyles = window.getComputedStyle(element);\n  return elementStyles.getPropertyValue(varName).trim();\n}\n\n\nexport function parseCssUrl(element, varName){\n  const css_url = window.getComputedStyle(element).getPropertyValue(varName);\n  \n  if (!css_url) { // if no custom property found...\n    console.log('Could not find custom property named: ' + varName);\n  } else { // if property found...\n  \n    // Grabbed from: gist.github.com/eligrey/1129978\n    var\n        uri = css_url.match(/^\\s*url\\(\\s*(.*)\\s*\\)\\s*$/)[1]\n      , last = uri.length - 1\n    ;\n    if (\n         uri[0] === '\"' && uri[last] === '\"'\n      || uri[0] === \"'\" && uri[last] === \"'\"\n    ) {\n      uri = uri.slice(1, -1);\n    }\n    return uri;\n  }\n}\n\n// export function toggleCSSOpacity(target) {\n\n//   var el = document.querySelector(target);\n\n//   if(el.style.opacity == '1') {\n//     el.style.opacity = '0';\n//     setTimeout( function(){ el.style.display = 'none' }, 100); \n//   } else {\n//     el.style.display = 'block';\n//     // Delay setting opacity, or opacity transition will not fire, due to https://bugs.chromium.org/p/chromium/issues/detail?id=121340\n//     setTimeout( function(){ el.style.opacity = 1 }, 100); \n//   }\n// }\n\n\n\n// WEBPACK FOOTER //\n// ./src/utilities.js","export default class StyleSheets {\n  constructor() {\n  \n    // get document stylesheets    \n    this.sheets = document.styleSheets;\n\n    // create a variable for the stylesheet with 'vr' title\n    for (var i = 0; i < this.sheets.length; i++) {\n      if (this.sheets[i].title === 'vr') {\n        this.vr = this.sheets[i];\n      }\n    }\n\n    // disable the vr stylesheet. It should only be active in certain display modes.\n    // this.setVRSheet('disable')\n  }\n\n  setVRSheet(mode) {\n    if (mode == 'disable') {\n      this.vr.disabled = true;\n    } else if (mode == 'enable') {\n      this.vr.disabled = false;\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/styleSheets.js","import Config from './config';\nimport {loaderGLTF} from './loaders';\nimport {getTransform, parseCssVar, pxToMeters} from './utilities';{}\n\nexport default class Model {\n  constructor(sceneFar, sceneNear, element) {\n\n    this.group = new THREE.Group();\n    this.gltf;\n    this.src = element.getAttribute('src');\n    this.coordinateSystem = parseCssVar(element, '--position');\n    this.transform = getTransform(element);\n\n    // add to either far or near scenes, depending on whether CSS Z transform is closer or further than webview.\n    if(pxToMeters(this.transform.translate.z) < -Config.WEBVIEW_DISTANCE) {\n      sceneFar.add(this.group);\n    } else {\n      sceneNear.add(this.group);\n    }\n\n    loaderGLTF.load(this.src, gltf => {\n\n      this.gltf = gltf.scene;\n\n      gltf.scene.position.set(\n        pxToMeters(this.transform.translate.x),\n        pxToMeters(this.transform.translate.y),\n        pxToMeters(this.transform.translate.z)\n      );\n\n      gltf.scene.scale.set(\n        this.transform.scale.x,\n        this.transform.scale.y,\n        this.transform.scale.z\n      );\n\n      // console.log(this.transform.scale.x, this.transform.scale.y, this.transform.scale.z);\n      this.group.add(this.gltf)\n    })\n  }\n\n  hide() {  \n    this.group.visible = false;\n  }\n\n  show() {\n    this.group.visible = true;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model.js","import { parseCssUrl } from './utilities';\n\nexport const loaderGLTF = new THREE.GLTF2Loader();\nexport const loaderOBJ = new THREE.OBJLoader2();\n\n// export function loadGLTF(src) {\n  \n//   // get URL of texture from CSS custom property\n//   // const model_url = parseCssUrl(document.querySelector(element), customProp);\n\n//   // load url\n//   loaderGLTF.load( src, function ( gltf ) {\n//     // sceneGL.add( gltf.scene );\n\n//     gltf.animations; // Array: THREE.AnimationClip\n//     gltf.scene;      // THREE.Scene\n//     gltf.scenes;     // Array: THREE.Scene\n//     gltf.cameras;    // Array: THREE.Camera\n\n//     // gltf.scene.position.set(0, 0, -4);\n//     return gltf;\n//     console.log(gltf);\n\n//   } );\n// }\n\nexport function loadOBJ(element, customProp) {\n  \n  // get URL of texture from CSS custom property\n  const model_url = parseCssUrl(document.querySelector(element), customProp);\n\n  // load url\n  loaderOBJ.load( model_url, function ( obj ) {\n    // sceneGL.add( obj );\n    return obj\n  });\n}\n/*\nexport function addLights() {\n  var spotLight = new THREE.SpotLight( 0xffffff );\n  spotLight.position.set( 100, 1000, 100 );\n  spotLight.castShadow = true;\n  spotLight.shadow.mapSize.width = 1024;\n  spotLight.shadow.mapSize.height = 1024;\n  spotLight.shadow.camera.near = 500;\n  spotLight.shadow.camera.far = 4000;\n  spotLight.shadow.camera.fov = 30;\n  sceneGL.add( spotLight );\n}\n*/\n\n\n// WEBPACK FOOTER //\n// ./src/loaders.js","import App from './app.js';\n\nfunction init() {\n  new App();\n}\n\nwindow.onload = function() {\n  init();\n}\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","'use strict';\n\nimport Background from './background';\nimport Camera from './camera';\nimport Config from './config';\nimport Container from './container';\nimport Css3dObjects from './css3dObjects';\nimport CssRoot from './cssRoot'\nimport DomWrapper from './domWrapper'\nimport Environment from './environment'\nimport Events from './events';\nimport Lights from './lights';\nimport Grid from './grid';\nimport Models from './models';\nimport RendererCSS from './rendererCSS';\nimport RendererGL from './rendererGL';\nimport State from './state';\nimport StyleSheets from './styleSheets';\nimport WebView from './webview';\n\n// app class instantiates and ties all of the components together, starts the loading process and renders the main loop\nexport default class App {\n  constructor() {\n\n    //instantiate styles\n    // this.styleSheets = new StyleSheets();\n    // this.styleSheets.setVRSheet('disable');\n    console.log(\"GorillassssTTT\");\n\n\n    /*\n\n    // create container element\n    this.container = new Container();\n\n    // create scenes\n    this.sceneGLFar = new THREE.Scene()\n    this.sceneCSS = new THREE.Scene()\n    this.sceneGLNear = new THREE.Scene()\n    \n    // instantiate renderers\n    this.rendererGLFar = new RendererGL(this.sceneGLFar, this.container.container);\n    this.rendererCSS = new RendererCSS(this.sceneCSS, this.container.container);\n    this.rendererGLNear = new RendererGL(this.sceneGLNear, this.container.container);\n    this.rendererGLNear.renderer.domElement.style.pointerEvents = 'none';\n\n    // instantiate camera\n    this.camera = new Camera(this.rendererGLNear.renderer);\n\n    // instantiate cssRoot object (we add all CSS objects to this)\n    this.cssRoot = new CssRoot(this.sceneCSS);\n\n    // instantiate 'domWrapper': an element containing all the original HTML elements\n    this.domWrapper = new DomWrapper();\n\n    // instantiate 'webview': simply the domWrapper converted to a CSS3D object, sized and positioned like a browser window in ChromeVR.\n    this.webview = new WebView(this.cssRoot, this.domWrapper);\n\n    //instantiate styles\n    this.styleSheets = new StyleSheets();\n\n    // instantiate CSS3D objects. Pass in cssRoot, webview and domWrapper. They're needed for setup purposes.\n    this.stereoElements = new Css3dObjects(this.cssRoot, this.webview, this.domWrapper, this.styleSheets); // array\n\n    // instantiate environment model\n    this.environment = new Environment(this.sceneGLFar, this.styleSheets);\n\n    // instantiate <model> elements\n    this.models = new Models(this.sceneGLFar, this.sceneGLNear, this.domWrapper, this.styleSheets);\n\n    // instantiate lighting\n    // we need to create one instance of the lighting for each GL renderer (near and far).\n    this.lightsFar = new Lights(this.sceneGLFar);\n    this.lightsNear = new Lights(this.sceneGLNear);\n\n    // instantiate backgrounds\n    this.browserBackground = new Background(this.sceneGLFar, 'images/environments/gray-gradient.jpg', 1);\n    this.grid = new Grid(this.sceneGLFar);\n    this.siteBackground = new Background(this.sceneGLFar, 'images/environments/puydesancy.jpg', 0.9); // TODO: make this not hard-coded?\n    this.siteBackground.object.rotation.set( 0, -1.57, 0);\n\n    // instantiate state\n    this.state = new State(this.styleSheets, this.stereoElements, this.siteBackground, this.grid, this.webview, this.environment, this.models);\n    this.state.setDisplayMode('mobile');\n\n    // instantiate events\n    this.events = new Events(this.camera, this.state,)\n\n    // start render loop\n    this.render();\n    */\n  }\n\n// Start by doing nothing to the site. Ignore `title=\"vr\"` stylesheet.\n// If mobile phones, is a mobile site.\n// If desktop, can be either mobile or VR site\n// If AR capable mobile, can be mobile or AR site.\n// Controls to turn into CSS3D live in 2D menu. With key presses wired.\n\n// Display in default presentation mode (e.g. mobile, desktop)\n// Menu or keyboard shortcuts to switch between modes.\n// When user presses VR button, kick into VR display mode.\n\n/*\n  render() {\n    TWEEN.update();\n\n    // lookAt logic has to check per-frame in the render loop, AFAIK. Variable names and paths here are pretty clunky.\n    if(this.camera.lookAt) { \n        this.camera.camera.lookAt(this.camera.lookAtTarget);\n    }\n\n    this.rendererGLFar.render(this.sceneGLFar, this.camera.camera);\n    this.rendererCSS.render(this.sceneCSS, this.camera.camera);\n    this.rendererGLNear.render(this.sceneGLNear, this.camera.camera);\n\n    requestAnimationFrame(this.render.bind(this)); // bind the main class instead of window object\n  }*/\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","import Config from './config';\n\nexport default class Background {\n  constructor(scene, texture, scale = 1) {\n\n    const geometry = new THREE.SphereGeometry(Config.BACKGROUND_RADIUS, 64, 64);\n    geometry.applyMatrix(new THREE.Matrix4().makeScale( -scale, scale, scale ));\n\n    this.object = new THREE.Mesh(\n      geometry,\n      new THREE.MeshBasicMaterial({ \n        shading: THREE.FlatShading,\n        map: new THREE.TextureLoader().load(texture)\n      })\n    );\n    this.object.rotation.set( 0, -1.57, 0);\n    scene.add(this.object);\n  }\n\n  hide() {\n    new TWEEN.Tween(this.object.material)\n      .to({opacity: 0}, 250)\n      .onComplete(function(){\n        this.object.visible = false;\n      }.bind(this))\n      .start();\n  }\n\n  show() {\n    this.object.visible = true;\n    new TWEEN.Tween(this.object.material)\n      .to({opacity: 1}, 250)\n      .delay(250)\n      .start();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/background.js","import Config from './config'\n\nexport default class Camera {\n  constructor(renderer, webview) {\n    const width = renderer.domElement.width;\n    const height = renderer.domElement.height;\n    this.camera = new THREE.PerspectiveCamera(Config.CAMERA_FOV, width / height, Config.CAMERA_NEAR, Config.CAMERA_FAR);\n    this.camera.scale.set(0.1, 0.1, 0.1);\n    this.lookAt = true; // boolean that sets whether camera should look at a target. Is checked per frame by render loop in App. Wish there was a better way.\n    this.lookAtTarget = new THREE.Vector3(0, 0, -Config.WEBVIEW_DISTANCE);\n    this.updateSize(renderer);\n    window.addEventListener('resize', () => this.updateSize(renderer), false);\n  }\n\n  updateSize(renderer) {\n    this.camera.aspect = renderer.domElement.width / renderer.domElement.height;\n    this.camera.updateProjectionMatrix();\n  }\n\n  // camera animations\n\n  lookAroundEdgesOfWebview() {\n    \n    this.lookAt = true;\n    let tweenA = new TWEEN.Tween( this.camera.position )\n      .to({ x: 1 }, 1250 )\n      .easing(TWEEN.Easing.Quadratic.Out)\n\n    let tweenB = new TWEEN.Tween( this.camera.position )\n      .to({ x: -1 }, 3000 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenC = new TWEEN.Tween( this.camera.position )\n      .to({ x: 0 }, 1500 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    tweenA.chain(tweenB);\n    tweenB.chain(tweenC);\n    tweenA.start();\n  }\n\n  lookSideToSide() {\n\n    this.lookAt = false;\n    let tweenA = new TWEEN.Tween( this.camera.rotation )\n      .to({ x: .1, y: .4 }, 1000 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenB = new TWEEN.Tween( this.camera.rotation )\n      .to({ x: .05, y: -.7 }, 1600 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenC = new TWEEN.Tween( this.camera.rotation )\n      .to({ x: -0.03, y: 0.04 }, 1700 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenD = new TWEEN.Tween( this.camera.rotation )\n      .to({ x: 0, y: 0 }, 600 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    tweenA.chain(tweenB);\n    tweenB.chain(tweenC);\n    tweenC.chain(tweenD);\n    tweenA.start();\n  }\n\n  panSideToSide() {\n\n    this.lookAt = false;\n    let tweenA = new TWEEN.Tween( this.camera.position )\n      .to({ x: 1 }, 1250 )\n      .easing(TWEEN.Easing.Quadratic.Out)\n\n    let tweenB = new TWEEN.Tween( this.camera.position )\n      .to({ x: -1 }, 3000 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenC = new TWEEN.Tween( this.camera.position )\n      .to({ x: 0 }, 1500 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    tweenA.chain(tweenB);\n    tweenB.chain(tweenC);\n    tweenA.start();\n  }\n\n  orthographic() {\n\n    this.lookAt = true;\n\n    new TWEEN.Tween( this.camera )\n      .to({ fov: 6 }, 1000)\n      .easing(TWEEN.Easing.Quadratic.InOut)\n      .start();\n\n    new TWEEN.Tween( this.camera.position )\n      .to({ x: 30, y: 30, z: 30 }, 1250 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n      .start();\n\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/camera.js","export default class Container {\n  constructor() {\n\n    // the container element will contain our Three.js renderers\n    this.container = document.createElement('div');\n    this.container.id = 'container';\n    this.container.style.position = 'absolute';\n    this.container.style.width = '100%';\n    this.container.style.height = '100vh';\n    this.container.style.top = this.container.style.left = 0;\n    document.body.appendChild(this.container);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/container.js","import Css3dObject from './css3dObject';\nimport {parseCssVar} from './utilities';\n\nexport default class Css3dObjects {\n  constructor(cssRoot, webview, domWrapper, styleSheets) {\n\n    // turn on vr stylesheet so we can parse it's values. We'll turn it off at the end of this function.\n    styleSheets.setVRSheet('enable');\n    \n    this.allElements = [];\n    this.stereoElements = [];\n\n    // `domWrapper.getElementsByTagName('*')` returns all elements inside domWrapper\n    for (var i = 0; i < domWrapper.getElementsByTagName('*').length; i++) {\n      this.allElements.push(domWrapper.getElementsByTagName('*')[i]);\n    }\n\n    // find elements that have both --transform-style 'stereo' and a transform, and create Css3dObject instances from them.\n    for (var i = 0; i < this.allElements.length; i++) {\n\n      this.element = this.allElements[i];\n      this.transformStyle = parseCssVar(this.element, '--transform-style');\n      this.transform = parseCssVar(this.element, 'transform');\n\n      // It's not enough to check for --transform-style: stereo, because we get false positives on children, which inherit it from parent.\n      // We can get the precision we need by also checking if they have transforms.\n      // TODO: This is obviously error prone, since some elements that are children of a 'stereo' parent could indeed have transforms, but it works for now.\n      if(this.transformStyle == 'stereo' && this.transform !== 'none') {\n\n        // for each element that matches the criteria, create a css3dObject instance and push it to the stereoElements array.\n        this.css3dObject = new Css3dObject(cssRoot, webview, this.element);\n        this.stereoElements.push(this.css3dObject);\n      }\n    }\n\n    // turn off the vr stylesheet. We don't want it active and adjusting layout until we're in VR mode.\n    styleSheets.setVRSheet('disable');\n  }\n\n  // show or hide each css3dObject instance in stereoElements array\n\n  hide(duration) {\n    this.stereoElements.forEach((e) => {\n      e.hide(duration);\n    })\n  }\n\n  show(duration) {\n    this.stereoElements.forEach((e) => {\n      e.show(duration);\n    })\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/css3dObjects.js","import {\n  toggleWebGLVisibility,\n  toggleCSSVisibility,\n  toggleWebviewShadows,\n  metersToPx,\n  getTransform,\n  parseMatrix,\n  parseCssVar,\n  parseCssUrl\n} from './utilities';\n\nimport Config from './config';\n\nexport default class Css3dObject {\n  constructor(cssRoot, webview, element) {\n\n    // get element and id\n    this.element = element;\n    this.id = this.element.id;\n\n    // get coordinate space from css.\n    this.coordinateSpace = parseCssVar(this.element, '--position');\n\n    // assign 'window' if undefined (thereby making 'window' the default).\n    if(!this.coordinateSpace) { this.coordinateSpace = 'window' };\n\n    // get starting values\n    this.startWidth = parseInt(window.getComputedStyle(this.element).getPropertyValue('width'));\n    this.startHeight = parseInt(window.getComputedStyle(this.element).getPropertyValue('height'));\n    this.startX = this.element.offsetLeft;\n    this.startY = this.element.offsetTop;\n    this.startZ;\n\n    // store original element (VR) values\n    this.targetScaleX = getTransform(this.element).scale.x;\n    this.targetScaleY = getTransform(this.element).scale.y;\n\n    // clone the original element:\n    // the clone stays in the position in page flow, and the original element is turned into a CSS3D object.\n    // this preserves the original layout during the transition by avoiding reflows created when original element is positioned absolute.\n    // original element also retains it's event listeners.\n    this.clone = this.element.cloneNode(true);\n    this.element.parentElement.insertBefore( this.clone, this.element );\n\n    // if the original element is position:absolute, zero out position values and change to relative, before converting to a CSS3DObject.\n    // this helps ensure that it's 'after' position matches it's 'before'.\n    if ( window.getComputedStyle(this.element).getPropertyValue('position') == 'absolute' ) {\n      this.element.style.top = this.element.style.bottom = this.element.style.left = this.element.style.right = 0;\n      this.element.style.position = 'relative';\n    } \n\n    // make a CSS3DObject of the element\n    this.object = new THREE.CSS3DObject(this.element);\n\n    // some coordinates depend on whether the object is in the 'world' or 'window' coordinate space\n    if (this.coordinateSpace == 'world') {\n\n      // position models at the values specific by their transforms. These are in the 'world' coordinate space (world being cssRoot); not relative to the window.\n      this.object.position.x = getTransform(element).translate.x;\n      this.object.position.y = getTransform(element).translate.y;\n      this.object.position.z = getTransform(element).translate.z;\n\n      // capturing 'target' values for objects in 'world' coordinate space isn't as useful, since they don't animate positions when displayMode changes, but we grab them anyways.\n      this.targetTransformX = object.position.x\n      this.targetTransformY = object.position.y\n      this.targetTransformZ = object.position.z\n\n      // add the CSS3Oobject to the cssRoot\n      cssRoot.add(this.object);    \n\n    } else if (this.coordinateSpace == 'window') {\n      \n      // match this object's position/rotation to the original target element\n      this.object.position.x = this.startX + this.startWidth / 2 - metersToPx(Config.WEBVIEW_WIDTH) / 2;\n      this.object.position.y = -this.startY - this.startHeight / 2 + metersToPx(Config.WEBVIEW_HEIGHT) / 2;\n      this.object.position.z = 0.0001;\n\n      // capture these values as the 'start' values. We'll use these to drive animations.\n      this.startX = this.object.position.x;\n      this.startY = this.object.position.y;\n      this.startZ = this.object.position.z;\n\n      // set 'target' values. In 'window' mode, transforms are relative to original element position, so we add the transform values to the original values.\n      this.targetTransformX = this.object.position.x + getTransform(this.element).translate.x;\n      this.targetTransformY = this.object.position.y + getTransform(this.element).translate.y;\n      this.targetTransformZ = getTransform(this.element).translate.z;\n\n      // add the CSS3Oobject to the webview object, so positions are relative\n      webview.object.add(this.object);\n    }\n\n\n    this.element.style.visibility = 'hidden'; // hide the CSS3DObject to start (by setting visibility style of the original element)\n\n  }\n\n  hide(duration) {\n    this.animate('hide', duration)\n  }\n\n  show(duration) {\n    this.animate('show', duration)\n  }\n  \n  animate(mode, duration = 250) {\n\n    let tranX, tranY, tranZ, scaleX, scaleY, delay;\n\n    // animate to new position, scale, rotation\n    if (this.coordinateSpace == 'window') {\n    \n      if (mode == 'show') {\n\n        this.element.style.visibility = 'visible';\n        this.clone.style.visibility = 'hidden';\n        tranX = this.targetTransformX;\n        tranY = this.targetTransformY;\n        tranZ = this.targetTransformZ;\n        scaleX = this.targetScaleX;\n        scaleY = this.targetScaleY;\n\n      } else if (mode == 'hide') {\n\n        delay = duration;\n\n        if (delay > 0) { // wait until position tweens complete to hide the CSS3D versions.\n          window.setTimeout(() => {\n            this.element.style.visibility = 'hidden';\n          }, delay);\n        } else {\n          this.element.style.visibility = 'hidden';\n        }\n\n        if (delay > 0) { // wait until position tweens complete to show the inline (\"clone\") versions. This makes transition seamless.\n          window.setTimeout(() => {\n            this.clone.style.visibility = 'visible';\n          }, delay);\n        } else {\n          this.clone.style.visibility = 'visible';\n        }\n\n        tranX = this.startX;\n        tranY = this.startY;\n        tranZ = this.startZ;\n        scaleX = 1;\n        scaleY = 1;\n      }\n\n      if(tranX) {\n        new TWEEN.Tween(this.object.position)\n          .to({x: tranX}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n\n      if(tranY) {\n        new TWEEN.Tween(this.object.position)\n          .to({y: tranY}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n\n      if(tranZ) {\n        new TWEEN.Tween(this.object.position)\n          .to({z: tranZ}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n\n      if(scaleX) {\n        new TWEEN.Tween(this.object.scale)\n          .to({x: scaleX}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n\n      if(scaleY) {\n        new TWEEN.Tween(this.object.scale)\n          .to({y: scaleY}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n    }\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/css3dObject.js","export default class CssRoot {\n  constructor(scene) {\n\n    // Setup cssRoot and scale by 0.001. We do this to adjust CSS px values into meters.\n    // All subsequent CSS objects are added to cssRoot.\n    this.cssRoot = new THREE.Object3D();\n    this.cssRoot.scale.set(0.001, 0.001, 0.001); \n    scene.add(this.cssRoot);\n    return this.cssRoot;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/cssRoot.js","import StyleSheets from './styleSheets';\nimport Config from './config';\n\nexport default class DomWrapper {\n  constructor() {\n\n    //get stylesheets\n    this.styleSheets = new StyleSheets();\n\n    //move html elements into a wrapper element\n    this.domWrapper = document.createElement('div');\n    this.domWrapper.id = 'domWrapper';\n    this.domWrapper.style.width = String(Config.WEBVIEW_WIDTH * 1000) + 'px';\n    this.domWrapper.style.height = String(Config.WEBVIEW_HEIGHT * 1000) + 'px';\n    this.domWrapper.style.position = 'relative';\n    this.domWrapper.style.overflow = 'scroll';\n    this.domWrapper.style.borderRadius = '8px';\n    this.domWrapper.style.boxShadow = '0px 0px 80px 0px rgba(0,0,0,0.1)';\n    this.domWrapper.style.transition = 'box-shadow 0.5s east-out'\n    document.body.appendChild(this.domWrapper);\n\n    // Move page elements into the domWrapper element\n    while (document.body.children.length > 2) {\n      let el = document.body.children[0];\n      if (el.id != 'domWrapper' && el.id != 'container') {\n        this.domWrapper.appendChild(document.body.children[0]);\n      }\n    }\n   \n    return this.domWrapper;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/domWrapper.js","import Model from './model';\nimport {loaderGLTF} from './loaders';\nimport {parseCssUrl} from './utilities';\n\nexport default class Environment {\n  constructor(sceneFar, styleSheets) {\n    \n    // check for environment CSS value\n    // if exists, create Model instance, set to default scale and position.\n\n    // turn on vr stylesheet so we can parse it's values. We'll turn it off at the end of this function.\n    styleSheets.setVRSheet('enable');\n\n    this.group = new THREE.Group();\n    this.gltf;\n    this.src = parseCssUrl(document.body, '--environment');\n    sceneFar.add(this.group);\n\n    if (this.src) {\n\n      loaderGLTF.load(this.src, gltf => {\n\n        this.gltf = gltf.scene;\n\n        // gltf.scene.position.set(\n        //   pxToMeters(this.transform.translate.x),\n        //   pxToMeters(this.transform.translate.y),\n        //   pxToMeters(this.transform.translate.z)\n        // );\n\n        // gltf.scene.scale.set(\n        //   this.transform.scale.x,\n        //   this.transform.scale.y,\n        //   this.transform.scale.z\n        // );\n\n        this.group.add(this.gltf);\n      })\n    }\n\n    // turn off the vr stylesheet. We don't want it active and adjusting layout until we're in VR mode.\n    styleSheets.setVRSheet('disable');\n\n  }\n\n  hide() {\n    this.group.visible = false;\n  }\n\n  show() {\n    this.group.visible = true;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/environment.js","export default class Events {\n  constructor(camera, state) {\n\n    window.addEventListener('keydown', function(e){\n\n      var handled = false;\n\n      // check if meta or ctrl keys are pressed. If not, proceed. Ensures keyboard shortcuts work properly on Mac & Windows.\n      if ((!e.metaKey) || (!e.metaKey)) {\n\n        switch (e.keyCode) {\n          case 49: { // 1\n            state.demoMode.enabled = false;\n            state.setDisplayMode('mobile');\n            handled = true;\n            break;\n          }\n          case 50: { // 2\n            state.demoMode.enabled = false;\n            state.setDisplayMode('vr-fullscreen');\n            handled = true;\n            break;\n          }\n          case 51: { // 3\n            state.demoMode.enabled = true;\n            state.setDisplayMode('vr-fullscreen');\n            handled = true;\n            break;\n          }\n          case 52: { // 4\n            state.demoMode.enabled = false;\n            state.setDisplayMode('vr-windowed');\n            handled = true;\n            break;\n          }\n          case 53: { // 5\n            camera.lookAroundEdgesOfWebview();\n            handled = true;\n            break;\n          }\n          case 54: { // 6\n            camera.lookSideToSide();\n            handled = true;\n            break;\n          }\n          case 55: { // 7\n            camera.panSideToSide();\n            handled = true;\n            break;\n          }\n          case 56: { // 8\n            camera.orthographic();\n            handled = true;\n            break;\n          }\n\n          case 32: { // space\n            handled = true;\n            break;\n          }\n        }\n\n        if (handled) e.preventDefault();\n      }\n    });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/events.js","export default class Lights {\n  constructor(scene) {\n\n    this.light = new THREE.HemisphereLight( 0xffffff, 0xB0B0B0, 1.2 );\n    scene.add(this.light);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lights.js","export default class Grid {\n  constructor(scene) {\n\n    this.object = new THREE.Mesh(\n      new THREE.PlaneGeometry(8, 8),\n      new THREE.MeshBasicMaterial({\n        transparent: true,\n        shading: THREE.FlatShading,\n        map: new THREE.TextureLoader().load('images/environments/gray-grid.png')\n      })\n    )\n    this.object.rotation.set(-1.57, 0, 0);\n    this.object.position.set(0, -1.7, 0);\n    scene.add(this.object);\n  }\n\n  hide() {\n    new TWEEN.Tween(this.object.material)\n      .to({opacity: 0}, 250)\n      .onComplete(function(){\n        this.object.visible = false;\n      }.bind(this))\n      .start();\n  }\n\n  show() {\n    this.object.visible = true;\n    new TWEEN.Tween(this.object.material)\n      .to({opacity: 1}, 250)\n      .delay(250)\n      .start();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/grid.js","import Model from './model';\n\n// import { parseCssVar } from './utilities';\n\nexport default class Models {\n  constructor(sceneFar, sceneNear, domWrapper, styleSheets) {\n\n    // parse page\n    // find models\n    // get src attribute value\n    // load model from that src\n    // position world or window?\n    // position \n\n    // turn on vr stylesheet so we can parse it's values. We'll turn it off at the end of this function.\n    styleSheets.setVRSheet('enable');\n\n    this.modelElements = domWrapper.getElementsByTagName('model');\n    this.modelObjects = [];\n\n    // if there are <model> elements in the HTML, create a three.js model instance for each.\n    if (this.modelElements.length > 0) {\n\n      for(var i = 0; i < this.modelElements.length; i++) {\n        this.model = new Model(sceneFar, sceneNear, this.modelElements[i])\n        this.modelObjects.push(this.model);\n      }\n    };\n\n    // turn off the vr stylesheet. We don't want it active and adjusting layout until we're in VR mode.\n    styleSheets.setVRSheet('disable');\n  }\n\n  hide() {\n    this.modelObjects.forEach((e) => {\n      e.hide();\n    })\n  }\n\n  show() {\n    this.modelObjects.forEach((e) => {\n      e.show();\n    })\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models.js","import Config from './config';\n\nexport default class RendererCSS {\n  constructor(scene, container) {\n    this.scene = scene;\n    this.container = container;\n    this.renderer = new THREE.CSS3DRenderer();\n    this.renderer.domElement.style.position = 'absolute';\n    this.renderer.domElement.style.top = 0;\n    this.renderer.domElement.style.left = 0;\n    container.appendChild(this.renderer.domElement);\n\n    this.updateSize();\n    document.addEventListener('DOMContentLoaded', () => this.updateSize(), false);\n    window.addEventListener('resize', () => this.updateSize(), false);\n  }\n\n  updateSize() {\n    this.renderer.setSize(this.container.offsetWidth, this.container.offsetHeight);\n  }\n\n  render(scene, camera) {\n    this.renderer.render(scene, camera)\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/rendererCSS.js","import Config from './config'\n\nexport default class RendererGL {\n  constructor(scene, container) {\n    this.scene = scene;\n    this.container = container;\n    this.renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\n    this.renderer.domElement.style.position = 'absolute';\n    this.renderer.domElement.style.top = 0;\n    this.renderer.domElement.style.left = 0;\n    container.appendChild(this.renderer.domElement);\n    \n    this.updateSize();\n    document.addEventListener('DOMContentLoaded', () => this.updateSize(), false);\n    window.addEventListener('resize', () => this.updateSize(), false);\n  }\n\n  updateSize() {\n    this.renderer.setSize(this.container.offsetWidth, this.container.offsetHeight);\n  }\n\n  render(scene, camera) {\n    this.renderer.render(scene, camera)\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/rendererGL.js","export default class State {\n  constructor(styleSheets, stereoElements, siteBackground, grid, webview, environment, models) {\n    \n    this.styleSheets = styleSheets;\n    this.stereoElements = stereoElements;\n    this.siteBackground = siteBackground;\n    this.grid = grid;\n    this.webview = webview;\n    this.environment = environment;\n    this.models = models;\n\n    // variable for current display mode\n    this.currentDisplayMode;\n\n    // set up demo mode. \n    // demo mode is used to turn features on one by one, to help show how they work.\n    this.demoMode = {};\n    this.demoMode.enabled = false;\n    this.demoMode.steps = [\n      'Disable all',\n      'Show site background',\n      'Show window transparency',\n      'Show window relative transforms',\n      'Show environment',\n      'Show window relative models',\n      'Show world relative transforms and models'\n    ]\n    this.demoMode.currentStep = 0;\n\n  }\n\n  // handle display mode updates\n  setDisplayMode(targetMode) {\n\n    if (targetMode == 'mobile' && this.currentDisplayMode !== 'mobile') {\n\n      this.enableMobileMode();\n\n    } else if ( targetMode == 'vr-fullscreen' && this.demoMode.enabled == false) {\n\n      this.enableVrFullscreenMode();      \n\n    } else if ( targetMode == 'vr-fullscreen' && this.demoMode.enabled == true) {\n\n      this.enableVrFullscreenDemoMode();\n\n    } else if (targetMode == 'vr-windowed' && this.currentDisplayMode !== 'vr-windowed') {\n\n      this.enableVrWindowedMode();\n    \n    } else {\n\n      console.log(\"ignored\");\n\n    }\n\n    this.currentDisplayMode = targetMode;\n  }\n\n  enableMobileMode() {\n    this.webview.showShadows();\n    this.grid.show();\n    this.siteBackground.hide();\n    this.environment.hide();\n    this.models.hide();\n    this.stereoElements.hide();\n    this.styleSheets.setVRSheet('disable');\n  }\n\n  enableVrFullscreenMode() {\n    this.webview.hideShadows();\n    this.grid.hide();\n    this.siteBackground.show();\n    this.environment.show();\n    this.models.show();\n    this.stereoElements.show();\n    this.styleSheets.setVRSheet('enable');\n  }\n\n  enableVrFullscreenDemoMode() {\n\n    // increment demo counter\n    if (this.demoMode.currentStep < this.demoMode.steps.length - 1) { \n      this.demoMode.currentStep += 1; \n    } else {\n      this.demoMode.currentStep = 0; \n    }\n\n    // trigger demo next step in demo sequence\n    if (this.demoMode.currentStep == 1) { //  show site background\n\n      this.webview.hideShadows();\n      this.grid.hide();\n      this.siteBackground.show();\n\n    } else if (this.demoMode.currentStep == 2) { //  show window transparency\n\n      this.styleSheets.setVRSheet('enable');\n\n    } else if (this.demoMode.currentStep == 3) { //show window-relative transforms\n\n      this.stereoElements.show();\n\n    } else if (this.demoMode.currentStep == 4) { // show 3d environment\n\n      this.environment.show();\n\n    } else if (this.demoMode.currentStep == 5) { // show window-relative models\n\n      this.models.show();\n      // TODO: distinguish window relative from world relative\n\n    } else if (this.demoMode.currentStep == 6) { // Show world relative transforms and models\n\n      // TODO\n\n    } else if (this.demoMode.currentStep == 0) { //  disable all\n\n      this.webview.showShadows();\n      this.grid.show();\n      this.siteBackground.hide();\n      this.environment.hide();\n      this.models.hide();\n      this.stereoElements.hide();\n      this.styleSheets.setVRSheet('disable');\n    }\n  }\n\n  enableVrWindowedMode() {\n    // TODO: 'vr-windowed' mode is complicated. We want to keep the vr stylesheet disabled. But we also want to return the CSS3DObjects to their original positions, without hiding them.\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/state.js","import Config from './config';\nimport { metersToPx } from './utilities';\n\nexport default class WebView {\n  constructor(cssRoot, domWrapper) {\n\n    // Turn the domWrapper into a CSS3DObject and set position\n    this.object = new THREE.CSS3DObject(domWrapper);\n    this.object.position.z = metersToPx(-Config.WEBVIEW_DISTANCE);\n    this.object.scale.set(Config.WEBVIEW_DISTANCE, Config.WEBVIEW_DISTANCE, Config.WEBVIEW_DISTANCE);\n\n    cssRoot.add(this.object);\n  }\n\n  hideShadows() {\n    domWrapper.style.boxShadow = '0px 0px 80px 0px rgba(0,0,0,0)'; \n    // new TWEEN.Tween(webviewShadow.material)\n    //   .to({opacity: 0}, 500)\n    //   .start();\n  }\n\n  showShadows() {\n    domWrapper.style.boxShadow = '0px 0px 80px 0px rgba(0,0,0,0)'; \n    // new TWEEN.Tween(webviewShadow.material)\n    //   .to({opacity: 0}, 500)\n    //   .start();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/webview.js"],"sourceRoot":""}