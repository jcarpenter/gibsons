{"version":3,"sources":["webpack:///webpack/bootstrap 32eac2928b82a754eb5e","webpack:///./src/config.js","webpack:///./src/utilities.js","webpack:///./src/styleSheets.js","webpack:///./src/index.js","webpack:///./src/app2.js","webpack:///./src/background.js","webpack:///./src/camera.js","webpack:///./src/container.js","webpack:///./src/css3dObjects.js","webpack:///./src/css3dObject.js","webpack:///./src/cssRoot.js","webpack:///./src/domWrapper.js","webpack:///./src/events.js","webpack:///./src/rendererCSS.js","webpack:///./src/rendererGL.js","webpack:///./src/state.js","webpack:///./src/webview.js"],"names":["WEBVIEW_DISTANCE","WEBVIEW_WIDTH","WEBVIEW_HEIGHT","CAMERA_HEIGHT","CAMERA_FOV","CAMERA_NEAR","CAMERA_FAR","BACKGROUND_RADIUS","metersToPx","getTransform","parseMatrix","parseCssVar","parseCssUrl","meters","element","matrix","getComputedStyle","transform","rotateY","Math","asin","m13","rotateX","rotateZ","cos","atan2","m23","m33","m12","m11","m31","m22","rotate","x","y","z","translate","m41","m42","m43","scale","matrixString","c","split","slice","length","m21","m32","m14","m24","m34","m44","varName","elementStyles","window","getPropertyValue","trim","css_url","console","log","uri","match","last","StyleSheets","sheets","document","styleSheets","i","title","vr","setVRSheet","mode","disabled","init","onload","App","container","sceneGL","THREE","Scene","sceneCSS","rendererGL","rendererCSS","camera","renderer","cssRoot","domWrapper","webview","stereoElements","browserBackground","siteBackground","object","rotation","set","state","setDisplayMode","events","render","TWEEN","update","requestAnimationFrame","bind","Background","scene","texture","geometry","SphereGeometry","applyMatrix","Matrix4","makeScale","Mesh","MeshBasicMaterial","shading","FlatShading","map","TextureLoader","load","add","visible","Tween","material","to","opacity","delay","start","onComplete","Camera","width","domElement","height","PerspectiveCamera","updateSize","addEventListener","aspect","updateProjectionMatrix","tweenA","easing","Easing","Quadratic","Out","tweenB","InOut","tweenC","chain","tweenD","position","Container","createElement","id","style","top","left","body","appendChild","Css3dObjects","allElements","getElementsByTagName","push","transformStyle","css3dObject","duration","forEach","e","animate","Css3dObject","coordinateSpace","startWidth","parseInt","startHeight","startX","offsetLeft","startY","offsetTop","startZ","targetScaleX","targetScaleY","clone","cloneNode","parentElement","insertBefore","bottom","right","CSS3DObject","targetTransformX","targetTransformY","targetTransformZ","visibility","tranX","tranY","tranZ","scaleX","scaleY","hide","show","target","setTimeout","CssRoot","Object3D","DomWrapper","String","overflow","borderRadius","boxShadow","transition","children","el","Events","handled","metaKey","keyCode","lookAroundEdgesOfWebview","lookSideToSide","panSideToSide","preventDefault","RendererCSS","CSS3DRenderer","setSize","offsetWidth","offsetHeight","RendererGL","WebGLRenderer","antialias","alpha","State","currentDisplayMode","targetMode","showShadows","hideShadows","WebView"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 32eac2928b82a754eb5e","export default {\n\tWEBVIEW_DISTANCE: 2,\n\tWEBVIEW_WIDTH: 0.96,\n\tWEBVIEW_HEIGHT: 0.64,\n\tCAMERA_HEIGHT: 1.6,\n  CAMERA_FOV: 80,\n\tCAMERA_NEAR: 0.1,\n\tCAMERA_FAR: 60000,\n\tBACKGROUND_RADIUS: 499\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","// export function toggleWebGLVisibility(target, mode, duration = 250, delay = 0) {\n\n//   if (mode == 'show') {\n\n//     // turn visibility true, then tween opacity to 1\n//     target.visible = true;\n//     new TWEEN.Tween(target.material)\n//       .to({opacity: 1}, delay)\n//       .delay(delay)\n//       .start();\n\n//   } else if (mode == 'hide') {\n\n//     // tween to 0 then set visibility to false\n//     new TWEEN.Tween(target.material)\n//       .to({opacity: 0}, delay)\n//       .delay(delay)\n//       .onComplete(function(){\n//         target.visible = false;\n//       })\n//       .start();\n//   }\n// }\n\n\n// export function toggleCSSVisibility(target, mode, delay = 0) {\n\n//   if (mode == 'show') {\n\n//     if (delay > 0) {\n//       window.setTimeout(() => {\n//         target.style.visibility = 'visible';\n//       }, delay);\n//     } else {\n//       target.style.visibility = 'visible';\n//     }\n\n//   } else if (mode == 'hide') {\n\n//     if (delay > 0) {\n//       window.setTimeout(() => {\n//         target.style.visibility = 'hidden';\n//       }, delay);\n//     } else {\n//       target.style.visibility = 'hidden';\n//     }\n//   }\n// }\n\nexport function metersToPx(meters) {\n  return meters * 1000;\n}\n\n\n// getTransform and parseMatrix functions taken from Keith Clark:\n// http://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/\nexport function getTransform (element) {\n    var matrix = parseMatrix(getComputedStyle(element, null).transform),\n        rotateY = Math.asin(-matrix.m13),\n        rotateX, \n        rotateZ;\n\n    if (Math.cos(rotateY) !== 0) {\n        rotateX = Math.atan2(matrix.m23, matrix.m33);\n        rotateZ = Math.atan2(matrix.m12, matrix.m11);\n    } else {\n        rotateX = Math.atan2(-matrix.m31, matrix.m22);\n        rotateZ = 0;\n    }\n    return {\n        rotate: { x: rotateX, y: rotateY, z: rotateZ },\n        translate: { x: matrix.m41, y: matrix.m42, z: matrix.m43 },\n        scale: { x: matrix.m11, y: matrix.m22, z: matrix.m33  }\n    };\n}\n\n\nexport function parseMatrix (matrixString) {\n  var c = matrixString.split(/\\s*[(),]\\s*/).slice(1,-1),\n    matrix;\n  if (c.length === 6) {\n    // 'matrix()' (3x2)\n    matrix = {\n        m11: +c[0], m21: +c[2], m31: 0, m41: +c[4],\n        m12: +c[1], m22: +c[3], m32: 0, m42: +c[5],\n        m13: 0,     m23: 0,     m33: 1, m43: 0,\n        m14: 0,     m24: 0,     m34: 0, m44: 1\n    };\n  } else if (c.length === 16) {\n    // matrix3d() (4x4)\n    matrix = {\n        m11: +c[0], m21: +c[4], m31: +c[8], m41: +c[12],\n        m12: +c[1], m22: +c[5], m32: +c[9], m42: +c[13],\n        m13: +c[2], m23: +c[6], m33: +c[10], m43: +c[14],\n        m14: +c[3], m24: +c[7], m34: +c[11], m44: +c[15]\n    };\n  } else {\n    // handle 'none' or invalid values.\n    matrix = {\n        m11: 1, m21: 0, m31: 0, m41: 0,\n        m12: 0, m22: 1, m32: 0, m42: 0,\n        m13: 0, m23: 0, m33: 1, m43: 0,\n        m14: 0, m24: 0, m34: 0, m44: 1\n    };\n  }\n  return matrix;\n}\n\n\n// TODO: Combined into a single generic function that can tell whether property value is a url().\n// For now I need to know ahead of time the CSS value so I know which function to call.\nexport function parseCssVar(element, varName){\n  const elementStyles = window.getComputedStyle(element);\n  return elementStyles.getPropertyValue(varName).trim();\n}\n\n\nexport function parseCssUrl(element, varName){\n  const css_url = window.getComputedStyle(element).getPropertyValue(varName);\n  \n  if (!css_url) { // if no custom property found...\n    console.log('Could not find custom property named: ' + varName);\n  } else { // if property found...\n  \n    // Grabbed from: gist.github.com/eligrey/1129978\n    var\n        uri = css_url.match(/^\\s*url\\(\\s*(.*)\\s*\\)\\s*$/)[1]\n      , last = uri.length - 1\n    ;\n    if (\n         uri[0] === '\"' && uri[last] === '\"'\n      || uri[0] === \"'\" && uri[last] === \"'\"\n    ) {\n      uri = uri.slice(1, -1);\n    }\n    return uri;\n  }\n}\n\n// export function toggleCSSOpacity(target) {\n\n//   var el = document.querySelector(target);\n\n//   if(el.style.opacity == '1') {\n//     el.style.opacity = '0';\n//     setTimeout( function(){ el.style.display = 'none' }, 100); \n//   } else {\n//     el.style.display = 'block';\n//     // Delay setting opacity, or opacity transition will not fire, due to https://bugs.chromium.org/p/chromium/issues/detail?id=121340\n//     setTimeout( function(){ el.style.opacity = 1 }, 100); \n//   }\n// }\n\n\n\n// WEBPACK FOOTER //\n// ./src/utilities.js","export default class StyleSheets {\n  constructor() {\n  \n    // get document stylesheets    \n    this.sheets = document.styleSheets;\n\n    // create a variable for the stylesheet with 'vr' title\n    for (var i = 0; i < this.sheets.length; i++) {\n      if (this.sheets[i].title === 'vr') {\n        this.vr = this.sheets[i];\n      }\n    }\n\n    // disable the vr stylesheet. It should only be active in certain display modes.\n    this.setVRSheet('disable')\n  }\n\n  setVRSheet(mode) {\n    if (mode == 'disable') {\n      this.vr.disabled = true;\n    } else if (mode == 'enable') {\n      this.vr.disabled = false;\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/styleSheets.js","import App from './app2.js';\n\nfunction init() {\n  new App();\n}\n\nwindow.onload = function() {\n  init();\n}\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","'use strict';\n\nimport Background from './background';\nimport Camera from './camera';\nimport Config from './config';\nimport Container from './container';\nimport Css3dObjects from './css3dObjects';\nimport CssRoot from './cssRoot'\nimport DomWrapper from './domWrapper'\nimport Events from './events';\nimport RendererCSS from './rendererCSS';\nimport RendererGL from './rendererGL';\nimport State from './state';\nimport StyleSheets from './styleSheets';\nimport WebView from './webview';\n\n// app class instantiates and ties all of the components together, starts the loading process and renders the main loop\nexport default class App {\n  constructor() {\n\n    // create container element\n    this.container = new Container();\n\n    // create scenes\n    this.sceneGL = new THREE.Scene()\n    this.sceneCSS = new THREE.Scene()\n    \n    // instantiate renderers\n    this.rendererGL = new RendererGL(this.sceneGL, this.container.container)\n    this.rendererCSS = new RendererCSS(this.sceneCSS, this.container.container)\n\n    // instantiate camera\n    this.camera = new Camera(this.rendererGL.renderer);\n\n    // instantiate cssRoot object (we add all CSS objects to this)\n    this.cssRoot = new CssRoot(this.sceneCSS);\n\n    // instantiate 'domWrapper': an element containing all the original HTML elements\n    this.domWrapper = new DomWrapper();\n\n    // instantiate 'webview': simply the domWrapper converted to a CSS3D object, sized and positioned like a browser window in ChromeVR.\n    this.webview = new WebView(this.cssRoot, this.domWrapper);\n\n    //instantiate styles\n    this.styleSheets = new StyleSheets();\n\n    // instantiate CSS3D objects. Pass in cssRoot, webview and domWrapper. They're needed for setup purposes.\n    this.stereoElements = new Css3dObjects(this.cssRoot, this.webview, this.domWrapper, this.styleSheets); // array\n\n    // instantiate backgrounds\n    this.browserBackground = new Background(this.sceneGL, 'images/environments/graygrid-360.png', 1);\n    this.siteBackground = new Background(this.sceneGL, 'images/environments/puydesancy.jpg', 0.9); // TODO: make this not hard-coded\n    this.siteBackground.object.rotation.set( 0, -1.57, 0);\n\n    // instantiate state\n    this.state = new State(this.styleSheets, this.stereoElements, this.siteBackground, this.webview);\n    this.state.setDisplayMode('mobile');\n\n    // instantiate events\n    this.events = new Events(this.camera, this.state,)\n\n    // start render loop\n    this.render();\n  }\n\n  render() {\n    TWEEN.update();\n    this.rendererGL.render(this.sceneGL, this.camera.camera);\n    this.rendererCSS.render(this.sceneCSS, this.camera.camera);\n    requestAnimationFrame(this.render.bind(this)); // bind the main class instead of window object\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app2.js","import Config from './config';\n\nexport default class Background {\n  constructor(scene, texture, scale = 1) {\n\n    const geometry = new THREE.SphereGeometry(Config.BACKGROUND_RADIUS, 64, 64);\n    geometry.applyMatrix(new THREE.Matrix4().makeScale( -scale, scale, scale ));\n\n    this.object = new THREE.Mesh(\n      geometry,\n      new THREE.MeshBasicMaterial({ \n        shading: THREE.FlatShading,\n        map: new THREE.TextureLoader().load(texture)\n      })\n    );\n    this.object.rotation.set( 0, -1.57, 0);\n    scene.add(this.object);\n  }\n\n  hide() {\n    this.object.visible = true;\n    new TWEEN.Tween(this.object.material)\n      .to({opacity: 1}, 250)\n      .delay(250)\n      .start();\n  }\n\n  show() {\n    new TWEEN.Tween(this.object.material)\n      .to({opacity: 0}, 250)\n      .onComplete(function(){\n        this.object.visible = false;\n      }.bind(this))\n      .start();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/background.js","import Config from './config'\n\nexport default class Camera {\n  constructor(renderer) {\n    const width = renderer.domElement.width;\n    const height = renderer.domElement.height;\n    this.camera = new THREE.PerspectiveCamera(Config.CAMERA_FOV, width / height, Config.CAMERA_NEAR, Config.CAMERA_FAR);\n    this.camera.scale.set(0.01, 0.01, 0.01);\n    this.updateSize(renderer);\n    window.addEventListener('resize', () => this.updateSize(renderer), false);\n  }\n\n  updateSize(renderer) {\n    this.camera.aspect = renderer.domElement.width / renderer.domElement.height;\n    this.camera.updateProjectionMatrix();\n  }\n\n  // the following are camera animations\n\n  lookAroundEdgesOfWebview() {\n    // camera.updateProjectionMatrix();\n    let tweenA = new TWEEN.Tween( this.camera.rotation )\n      .to({ y: 1 }, 1250 )\n      .easing(TWEEN.Easing.Quadratic.Out)\n\n    let tweenB = new TWEEN.Tween( this.camera.rotation )\n      .to({ y: -1 }, 3000 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenC = new TWEEN.Tween( this.camera.rotation )\n      .to({ y: 0 }, 1500 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    tweenA.chain(tweenB);\n    tweenB.chain(tweenC);\n    tweenA.start();\n  }\n\n  lookSideToSide() {\n\n    let tweenA = new TWEEN.Tween( this.camera.rotation )\n      .to({ x: .1, y: .4 }, 1000 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenB = new TWEEN.Tween( this.camera.rotation )\n      .to({ x: .05, y: -.7 }, 1600 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenC = new TWEEN.Tween( this.camera.rotation )\n      .to({ x: -0.03, y: 0.04 }, 1700 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenD = new TWEEN.Tween( this.camera.rotation )\n      .to({ x: 0, y: 0 }, 600 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    tweenA.chain(tweenB);\n    tweenB.chain(tweenC);\n    tweenC.chain(tweenD);\n    tweenA.start();\n  }\n\n  panSideToSide() {\n\n    let tweenA = new TWEEN.Tween( this.camera.position )\n      .to({ x: 1 }, 1250 )\n      .easing(TWEEN.Easing.Quadratic.Out)\n\n    let tweenB = new TWEEN.Tween( this.camera.position )\n      .to({ x: -1 }, 3000 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    let tweenC = new TWEEN.Tween( this.camera.position )\n      .to({ x: 0 }, 1500 )\n      .easing(TWEEN.Easing.Quadratic.InOut)\n\n    tweenA.chain(tweenB);\n    tweenB.chain(tweenC);\n    tweenA.start();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/camera.js","export default class Container {\n  constructor() {\n\n    // the container element will contain our Three.js renderers\n    this.container = document.createElement('div');\n    this.container.id = 'container';\n    this.container.style.position = 'absolute';\n    this.container.style.width = '100%';\n    this.container.style.height = '100vh';\n    this.container.style.top = this.container.style.left = 0;\n    document.body.appendChild(this.container);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/container.js","import Css3dObject from './css3dObject';\n\nimport {\n  // toggleWebGLVisibility,\n  // toggleCSSVisibility,\n  // toggleWebviewShadows,\n  // metersToPx,\n  // getTransform,\n  // parseMatrix,\n  parseCssVar,\n  // parseCssUrl\n} from './utilities';\n\nexport default class Css3dObjects {\n  constructor(cssRoot, webview, domWrapper, styleSheets) {\n\n    // turn on vr stylesheet so we can parse it's values. We'll turn it off at the end of this function.\n    styleSheets.setVRSheet('enable');\n    \n    this.allElements = [];\n    this.stereoElements = [];\n\n    // `domWrapper.getElementsByTagName('*')` returns all elements inside domWrapper\n    for (var i = 0; i < domWrapper.getElementsByTagName('*').length; i++) {\n      this.allElements.push(domWrapper.getElementsByTagName('*')[i]);\n    }\n\n    // find elements that have both --transform-style 'stereo' and a transform, and create Css3dObject instances from them.\n    for (var i = 0; i < this.allElements.length; i++) {\n\n      this.element = this.allElements[i];\n      this.transformStyle = parseCssVar(this.element, '--transform-style');\n      this.transform =  parseCssVar(this.element, 'transform');\n\n      // It's not enough to check for --transform-style: stereo, because we get false positives on children, which inherit it from parent.\n      // We can get the precision we need by also checking if they have transforms.\n      // TODO: This is obviously error prone, since some elements that are children of a 'stereo' parent could indeed have transforms, but it works for now.\n      if(this.transformStyle == 'stereo' && this.transform !== 'none') {\n\n        // for each element that matches the criteria, create a css3dObject instance and push it to the stereoElements array.\n        this.css3dObject = new Css3dObject(cssRoot, webview, this.element);\n        this.stereoElements.push(this.css3dObject);\n      }\n    }\n\n    // turn off the vr stylesheet. We don't want it active and adjusting layout until we're in VR mode.\n    styleSheets.setVRSheet('disable');\n  }\n\n  // for each css3dObject instance in stereoElements array, call it's animate function\n  // 'mode' is either 'hide' or 'show'.\n  animate(mode, duration) {\n\n    this.stereoElements.forEach((e) => {\n      e.animate(mode, duration);\n    })\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/css3dObjects.js","import {\n  toggleWebGLVisibility,\n  toggleCSSVisibility,\n  toggleWebviewShadows,\n  metersToPx,\n  getTransform,\n  parseMatrix,\n  parseCssVar,\n  parseCssUrl\n} from './utilities';\n\nimport Config from './config';\n\nexport default class Css3dObject {\n  constructor(cssRoot, webview, element) {\n\n    // get element and id\n    this.element = element;\n    this.id = this.element.id;\n\n    // get coordinate space from css.\n    this.coordinateSpace = parseCssVar(this.element, '--position');\n\n    // assign 'window' if undefined (thereby making 'window' the default).\n    if(!this.coordinateSpace) { this.coordinateSpace = 'window' };\n\n    // get starting values\n    this.startWidth = parseInt(window.getComputedStyle(this.element).getPropertyValue('width'));\n    this.startHeight = parseInt(window.getComputedStyle(this.element).getPropertyValue('height'));\n    this.startX = this.element.offsetLeft;\n    this.startY = this.element.offsetTop;\n    this.startZ;\n\n    // store original element (VR) values\n    this.targetScaleX = getTransform(this.element).scale.x;\n    this.targetScaleY = getTransform(this.element).scale.y;\n\n    // clone the original element:\n    // the clone stays in the position in page flow, and the original element is turned into a CSS3D object.\n    // this preserves the original layout during the transition by avoiding reflows created when original element is positioned absolute.\n    // original element also retains it's event listeners.\n    this.clone = this.element.cloneNode(true);\n    this.element.parentElement.insertBefore( this.clone, this.element );\n\n    // if the original element is position:absolute, zero out position values and change to relative, before converting to a CSS3DObject.\n    // this helps ensure that it's 'after' position matches it's 'before'.\n    if ( window.getComputedStyle(this.element).getPropertyValue('position') == 'absolute' ) {\n      this.element.style.top = this.element.style.bottom = this.element.style.left = this.element.style.right = 0;\n      this.element.style.position = 'relative';\n    } \n\n    // make a CSS3DObject of the element\n    this.object = new THREE.CSS3DObject(this.element);\n\n    // some coordinates depend on whether the object is in the 'world' or 'window' coordinate space\n    if (this.coordinateSpace == 'world') {\n\n      // position models at the values specific by their transforms. These are in the 'world' coordinate space (world being cssRoot); not relative to the window.\n      this.object.position.x = getTransform(element).translate.x;\n      this.object.position.y = getTransform(element).translate.y;\n      this.object.position.z = getTransform(element).translate.z;\n\n      // capturing 'target' values for objects in 'world' coordinate space isn't as useful, since they don't animate positions when displayMode changes, but we grab them anyways.\n      this.targetTransformX = object.position.x\n      this.targetTransformY = object.position.y\n      this.targetTransformZ = object.position.z\n\n      // add the CSS3Oobject to the cssRoot\n      cssRoot.add(this.object);    \n\n    } else if (this.coordinateSpace == 'window') {\n      \n      // match this object's position/rotation to the original target element\n      this.object.position.x = this.startX + this.startWidth / 2 - metersToPx(Config.WEBVIEW_WIDTH) / 2;\n      this.object.position.y = -this.startY - this.startHeight / 2 + metersToPx(Config.WEBVIEW_HEIGHT) / 2;\n      this.object.position.z = 0.0001;\n\n      // capture these values as the 'start' values. We'll use these to drive animations.\n      this.startX = this.object.position.x;\n      this.startY = this.object.position.y;\n      this.startZ = this.object.position.z;\n\n      // set 'target' values. In 'window' mode, transforms are relative to original element position, so we add the transform values to the original values.\n      this.targetTransformX = this.object.position.x + getTransform(this.element).translate.x;\n      this.targetTransformY = this.object.position.y + getTransform(this.element).translate.y;\n      this.targetTransformZ = getTransform(this.element).translate.z;\n\n      // add the CSS3Oobject to the webview object, so positions are relative\n      webview.object.add(this.object);\n    }\n\n\n    this.element.style.visibility = 'hidden'; // hide the CSS3DObject to start (by setting visibility style of the original element)\n\n  }\n\n  animate(mode, duration = 250) {\n\n    let tranX, tranY, tranZ, scaleX, scaleY, delay;\n\n    // animate to new position, scale, rotation\n    if (this.coordinateSpace == 'window') {\n    \n      if (mode == 'show') {\n\n        this.element.style.visibility = 'visible';\n        this.clone.style.visibility = 'hidden';\n        tranX = this.targetTransformX;\n        tranY = this.targetTransformY;\n        tranZ = this.targetTransformZ;\n        scaleX = this.targetScaleX;\n        scaleY = this.targetScaleY;\n\n      } else if (mode == 'hide') {\n\n        delay = duration;\n        this.hide(this.element, delay); // wait until position tweens complete to hide the CSS3D versions.\n        this.show(this.clone, delay); // wait until position tweens complete to show the inline (\"clone\") versions. This makes transition seamless.\n        tranX = this.startX;\n        tranY = this.startY;\n        tranZ = this.startZ;\n        scaleX = 1;\n        scaleY = 1;\n      }\n\n      if(tranX) {\n        new TWEEN.Tween(this.object.position)\n          .to({x: tranX}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n\n      if(tranY) {\n        new TWEEN.Tween(this.object.position)\n          .to({y: tranY}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n\n      if(tranZ) {\n        new TWEEN.Tween(this.object.position)\n          .to({z: tranZ}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n\n      if(scaleX) {\n        new TWEEN.Tween(this.object.scale)\n          .to({x: scaleX}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n\n      if(scaleY) {\n        new TWEEN.Tween(this.object.scale)\n          .to({y: scaleY}, duration)\n          .easing(TWEEN.Easing.Quadratic.InOut)\n          .start();\n      }\n    }\n  }\n\n  hide(target, delay = 0) {\n    if (delay > 0) {\n      window.setTimeout(() => {\n        target.style.visibility = 'hidden';\n      }, delay);\n    } else {\n      target.style.visibility = 'hidden';\n    }\n  }\n\n  show(target, delay = 0) {\n    if (delay > 0) {\n      window.setTimeout(() => {\n        target.style.visibility = 'visible';\n      }, delay);\n    } else {\n      target.style.visibility = 'visible';\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/css3dObject.js","export default class CssRoot {\n  constructor(scene) {\n\n    // Setup cssRoot and scale by 0.001. We do this to adjust CSS px values into meters.\n    // All subsequent CSS objects are added to cssRoot.\n    this.cssRoot = new THREE.Object3D();\n    this.cssRoot.scale.set(0.001, 0.001, 0.001); \n    scene.add(this.cssRoot);\n    return this.cssRoot;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/cssRoot.js","import StyleSheets from './styleSheets';\nimport Config from './config';\n\nexport default class DomWrapper {\n  constructor() {\n\n    //get stylesheets\n    this.styleSheets = new StyleSheets();\n\n    //move html elements into a wrapper element\n    this.domWrapper = document.createElement('div');\n    this.domWrapper.id = 'domWrapper';\n    this.domWrapper.style.width = String(Config.WEBVIEW_WIDTH * 1000) + 'px';\n    this.domWrapper.style.height = String(Config.WEBVIEW_HEIGHT * 1000) + 'px';\n    this.domWrapper.style.position = 'relative';\n    this.domWrapper.style.overflow = 'scroll';\n    this.domWrapper.style.borderRadius = '8px';\n    this.domWrapper.style.boxShadow = '0px 0px 80px 0px rgba(0,0,0,0.1)';\n    this.domWrapper.style.transition = 'box-shadow 0.5s east-out'\n    document.body.appendChild(this.domWrapper);\n\n    // Move page elements into the domWrapper element\n    while (document.body.children.length > 2) {\n      let el = document.body.children[0];\n      if (el.id != 'domWrapper' && el.id != 'container') {\n        this.domWrapper.appendChild(document.body.children[0]);\n      }\n    }\n   \n   return this.domWrapper;\n\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/domWrapper.js","export default class Events {\n  constructor(camera, state) {\n\n    window.addEventListener('keydown', function(e){\n\n      var handled = false;\n\n      // check if meta or ctrl keys are pressed. If not, proceed. Ensures keyboard shortcuts work properly on Mac & Windows.\n      if ((!e.metaKey) || (!e.metaKey)) {\n\n        switch (e.keyCode) {\n          case 49: { // 1\n            state.setDisplayMode('mobile');\n            handled = true;\n            break;\n          }\n          case 50: { // 2\n            state.setDisplayMode('vr-fullscreen');\n            handled = true;\n            break;\n          }\n          case 51: { // 3\n            state.setDisplayMode('vr-windowed');\n            handled = true;\n            break;\n          }\n          case 52: { // 4\n            camera.lookAroundEdgesOfWebview();\n            handled = true;\n            break;\n\n          }\n          case 53: { // 5\n            camera.lookSideToSide();\n            handled = true;\n            break;\n          }\n          case 54: { // 6\n            camera.panSideToSide();\n            handled = true;\n            break;\n          }\n\n          case 32: { // space\n            handled = true;\n            break;\n          }\n        }\n\n        if (handled) e.preventDefault();\n      }\n    });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/events.js","import Config from './config';\n\nexport default class RendererCSS {\n  constructor(scene, container) {\n    this.scene = scene;\n    this.container = container;\n    this.renderer = new THREE.CSS3DRenderer();\n    this.renderer.domElement.style.position = 'absolute';\n    this.renderer.domElement.style.top = 0;\n    this.renderer.domElement.style.left = 0;\n    container.appendChild(this.renderer.domElement);\n\n    this.updateSize();\n    document.addEventListener('DOMContentLoaded', () => this.updateSize(), false);\n    window.addEventListener('resize', () => this.updateSize(), false);\n  }\n\n  updateSize() {\n    this.renderer.setSize(this.container.offsetWidth, this.container.offsetHeight);\n  }\n\n  render(scene, camera) {\n    this.renderer.render(scene, camera)\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/rendererCSS.js","import Config from './config'\n\nexport default class RendererGL {\n  constructor(scene, container) {\n    this.scene = scene;\n    this.container = container;\n    this.renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\n    this.renderer.domElement.style.position = 'absolute';\n    this.renderer.domElement.style.top = 0;\n    this.renderer.domElement.style.left = 0;\n    container.appendChild(this.renderer.domElement);\n    \n    this.updateSize();\n    document.addEventListener('DOMContentLoaded', () => this.updateSize(), false);\n    window.addEventListener('resize', () => this.updateSize(), false);\n  }\n\n  updateSize() {\n    this.renderer.setSize(this.container.offsetWidth, this.container.offsetHeight);\n  }\n\n  render(scene, camera) {\n    this.renderer.render(scene, camera)\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/rendererGL.js","export default class State {\n  constructor(styleSheets, stereoElements, siteBackground, webview) {\n    this.currentDisplayMode;\n    this.styleSheets = styleSheets;\n    this.stereoElements = stereoElements;\n    this.siteBackground = siteBackground;\n    this.webview = webview;\n  }\n\n  setDisplayMode(targetMode) {\n    if (targetMode == 'mobile' && this.currentDisplayMode != 'mobile') {\n\n      this.webview.showShadows();\n      this.siteBackground.show();\n      this.stereoElements.animate('hide');\n      this.styleSheets.setVRSheet('disable');\n      this.currentDisplayMode = targetMode;\n\n    } else if ( targetMode == 'vr-fullscreen' && this.currentDisplayMode != 'vr-fullscreen') {\n\n      this.webview.hideShadows();\n      this.siteBackground.hide();\n      this.stereoElements.animate('show');\n      this.styleSheets.setVRSheet('enable');\n      this.currentDisplayMode = targetMode;\n\n    } else if (targetMode == 'vr-windowed' && this.currentDisplayMode != 'vr-windowed') {\n\n      // TODO: 'vr-windowed' mode is complicated. We want to keep the vr stylesheet disabled. But we also want to return the CSS3DObjects to their original positions, without hiding them.\n      \n      this.currentDisplayMode = targetMode;\n    \n    } else {\n      console.log(\"ignored\");\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/state.js","import Config from './config';\nimport { metersToPx } from './utilities';\n\nexport default class WebView {\n  constructor(cssRoot, domWrapper) {\n\n    // Turn the domWrapper into a CSS3DObject and set position\n    this.object = new THREE.CSS3DObject(domWrapper);\n    this.object.position.z = metersToPx(-Config.WEBVIEW_DISTANCE);\n    this.object.scale.set(Config.WEBVIEW_DISTANCE, Config.WEBVIEW_DISTANCE, Config.WEBVIEW_DISTANCE);\n\n    cssRoot.add(this.object);\n  }\n\n  hideShadows() {\n    domWrapper.style.boxShadow = '0px 0px 80px 0px rgba(0,0,0,0)'; \n    // new TWEEN.Tween(webviewShadow.material)\n    //   .to({opacity: 0}, 500)\n    //   .start();\n  }\n\n  showShadows() {\n    domWrapper.style.boxShadow = '0px 0px 80px 0px rgba(0,0,0,0)'; \n    // new TWEEN.Tween(webviewShadow.material)\n    //   .to({opacity: 0}, 500)\n    //   .start();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/webview.js"],"sourceRoot":""}